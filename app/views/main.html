<div class="header">
  <ul class="nav nav-pills pull-right">
    <li><a ng-href="#" ng-click="logOut()" ng-hide="!$root.isAuthenticated">Log Out</a></li>
  </ul>
  <h3 class="text-muted" ng-show="$root.isAuthenticated">Dropbox Taskpaper Editor</h3>
</div>

<div class="jumbotron" ng-hide="$root.isAuthenticated">
  <h1>Dropbox Taskpaper Editor</h1>
  <p class="lead">
    The Web-based Dropbox-synced Taskpaper Document Editor
  </p>
  <a ng-href="/auth" class="btn btn-outline-inverse btn-lg">Log In</a>
</div>

<div class="row" ng-show="$root.isAuthenticated">
  <div class="alert notice" ng-show="message">{{message}}</div>

  <div class="col-md-12">
    <h3>Taskpaper Documents</h3>
    <ol>
      <li ng-show="loadingFiles">Loading list of documents...</li>
      <li ng-repeat="file in files"><a ng-click="openFile(file)" ng-href="#">{{file}}</a></li>
    </ol>
  </div>

  <div class="col-md-12">
    <p style="font-size:1.5em;"><b>{{currentFile}}</b> <b ng-show="fileConflict" style="color:red; font-weight:bolder;">⚠ Conflict</b> <button ng-show="currentFile" ng-click="saveFile(currentFile, fileContent)" class="btn">Save</button> <button ng-click="newFile()" class="btn">New File</button> <span ng-show="loadingContent">Loading document...</span> <span ng-show="refreshContent" style="color:grey; font-weight:bolder;" class="loading-spinner">⟳</span></p>
  </div>

  <div class="col-md-6" ng-show="currentFile">
    <h4>Editor</h4>
    <textarea ng-model="fileContent" style="width:100%; height:600px;" class="taskpaper-source"></textarea>
  </div>

  <div class="col-md-6" ng-show="currentFile">
    <h4>Preview</h4>
    <div ng-bind-html="renderedContent" class="taskpaper-rendered"></div>
  </div>

</div>

<div class="footer">
  <p>&copy; Paul Thrasher</p>
</div>
